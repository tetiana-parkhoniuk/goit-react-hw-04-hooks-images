(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{14:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__1LEDw",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__2Xjb0"}},15:function(e,t,a){e.exports={overlay:"Modal_overlay__2GjdW",modal:"Modal_modal__P3_V5"}},26:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__1IlRL"}},27:function(e,t,a){e.exports={button:"Button_button__3QF_k"}},29:function(e,t,a){e.exports={spinner:"Spinner_spinner__1Neu5"}},30:function(e,t,a){e.exports={app:"App_app__1kX79"}},35:function(e,t,a){},5:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__jo466",searchForm:"Searchbar_searchForm__23jwf",searchFormBtn:"Searchbar_searchFormBtn__24U6R",searchFormBtnLabel:"Searchbar_searchFormBtnLabel__dw1vf",searchFormInput:"Searchbar_searchFormInput__tpesZ"}},77:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(6),c=a.n(s),o=(a(35),a(36),a(4)),i=a.n(o),l=a(17),u=a(7),m=a(8),h=a(9),p=a(11),g=a(10),d=a(12),b=a(5),f=a.n(b),j=a(1);function y(e){var t=e.onSubmit;return Object(j.jsx)("header",{className:f.a.searchbar,children:Object(j.jsxs)("form",{className:f.a.searchForm,onSubmit:function(e){e.preventDefault(),t(e.target.elements.searchQuery.value)},children:[Object(j.jsx)("button",{type:"submit",className:f.a.searchFormBtn,children:Object(j.jsx)("span",{className:f.a.searchFormBtnLabel,children:"Search"})}),Object(j.jsx)("input",{className:f.a.searchFormInput,name:"searchQuery",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var v=a(14),x=a.n(v);function _(e){var t=e.webformatURL,a=e.tags,r=e.onImageClick,n=e.largeImageURL;return Object(j.jsx)("li",{className:x.a.imageGalleryItem,onClick:function(){return r(n)},children:Object(j.jsx)("img",{src:t,alt:a,className:x.a.imageGalleryItemImage})})}var O=a(26),S=a.n(O);function I(e){var t=e.images,a=e.onSelect;return Object(j.jsx)("ul",{className:S.a.imageGallery,children:t.map((function(e){return Object(j.jsx)(_,{webformatURL:e.webformatURL,tags:e.tags,onImageClick:a,largeImageURL:e.largeImageURL},e.id)}))})}var w=a(2),k=a.n(w),L=a(27),C=a.n(L);function F(e){var t=e.onClick;return Object(j.jsx)("button",{type:"button",className:C.a.button,onClick:t,children:"Load more"})}F.prototypes={onClick:k.a.func.isRequired};var N=a(28),G=a.n(N),R=a(29),U=a.n(R);function q(){return Object(j.jsx)("div",{className:U.a.spinner,children:Object(j.jsx)(G.a,{type:"ThreeDots",color:"#d3d8e8",height:100,width:100,timeout:3e3})})}var Q=a(15),B=a.n(Q),D=document.querySelector("#modal-root"),M=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydow",this.handleKeyDown)}},{key:"render",value:function(){return Object(s.createPortal)(Object(j.jsx)("div",{className:B.a.overlay,onClick:this.handleOverlayClick,children:Object(j.jsx)("div",{className:B.a.modal,children:Object(j.jsx)("img",{src:this.props.largeImageURL,alt:""})})}),D)}}]),a}(r.Component),E=a(16),P=a.n(E);P.a.defaults.baseURL="https://pixabay.com/api/";var A=function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"21882924-40498065f1aa5022828b315f8",r="page=".concat(a,"&key=").concat("21882924-40498065f1aa5022828b315f8","&image_type=photo&orientation=horizontal&per_page=12"),e.next=4,P.a.get("?q=".concat(t,"&").concat(r));case 4:return n=e.sent,e.abrupt("return",n.data.hits);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=a(30),T=a.n(K),J=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:null,images:[],page:1,reqStatus:"idle",selectedImage:null},e.handleFormSubmit=function(t){e.setState({searchQuery:t,page:1,images:[]})},e.incrementPage=function(){e.setState({page:e.state.page+1})},e.scrollOnLoadMore=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.toggleModal=function(){e.setState((function(e){return{selectedImage:!e.selectedImage}}))},e.handleSelectedImage=function(t){e.setState({selectedImage:t})},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.searchQuery===this.state.searchQuery){e.next=15;break}return e.prev=1,this.setState({reqStatus:"pending"}),e.next=5,A(this.state.searchQuery,this.state.page);case 5:r=e.sent,this.setState({images:r,reqStatus:"fulfilled"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),this.setState({reqStatus:"rejected"}),d.b.error("Something went worng, please try again later.");case 13:e.next=29;break;case 15:if(a.page===this.state.page){e.next=29;break}return e.prev=16,this.setState({reqStatus:"pending"}),e.next=20,A(this.state.searchQuery,this.state.page);case 20:n=e.sent,this.setState({images:[].concat(Object(l.a)(this.state.images),Object(l.a)(n)),reqStatus:"fulfilled"}),this.scrollOnLoadMore(),e.next=29;break;case 25:e.prev=25,e.t1=e.catch(16),this.setState({reqStatus:"rejected"}),d.b.error("Something went worng, please try again later.");case 29:case"end":return e.stop()}}),e,this,[[1,9],[16,25]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.images,a=e.reqStatus,r=e.selectedImage,n="pending"===a,s=t.length>0;return Object(j.jsxs)("div",{className:T.a.app,children:[Object(j.jsx)(d.a,{position:"top-right",toastOptions:{duration:2e3}}),Object(j.jsx)(y,{onSubmit:this.handleFormSubmit}),Object(j.jsx)(I,{images:t,onSelect:this.handleSelectedImage}),n&&Object(j.jsx)(q,{}),s&&Object(j.jsx)(F,{onClick:this.incrementPage}),r&&Object(j.jsx)(M,{onClose:this.toggleModal,largeImageURL:r})]})}}]),a}(r.Component);c.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(J,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.5a1db587.chunk.js.map